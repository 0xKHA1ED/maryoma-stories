<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aníbal y el Misterio del Fin de Semana</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Lora:ital,wght@0,400..700;1,400..700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; }
        .story-title { font-family: 'Lora', serif; }
        .story-content { font-family: 'Lora', serif; }

        /* Custom styles for the range input (seek bar) */
        .seek-slider {
            -webkit-appearance: none;
            appearance: none;
            width: 100%;
            height: 5px;
            background: #d1fae5;
            outline: none;
            opacity: 0.8;
            transition: opacity .2s;
            border-radius: 5px;
            cursor: pointer;
        }

        .seek-slider:hover {
            opacity: 1;
        }

        .seek-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 15px;
            height: 15px;
            background: #10b981;
            border-radius: 50%;
        }

        .seek-slider::-moz-range-thumb {
            width: 15px;
            height: 15px;
            background: #10b981;
            border: none;
            border-radius: 50%;
        }
    </style>
</head>
<body class="bg-emerald-50 text-gray-800 pb-24">

    <div class="container mx-auto px-4 py-8 md:py-16">
        <main class="max-w-3xl mx-auto bg-white rounded-2xl shadow-lg overflow-hidden">
            <div class="p-8 md:p-12">

                <!-- Header with Title and Icon -->
                <header class="text-center mb-8">
                    <img src="../../assets/icon.png" alt="Story Image" class="w-24 h-24 rounded-full object-cover mx-auto mb-4 shadow-md border-4 border-white">
                    <h1 class="story-title text-3xl md:text-4xl font-bold text-emerald-800">Aníbal y el Misterio del Fin de Semana</h1>
                </header>

                <!-- Story Content -->
                <div class="story-content text-lg leading-relaxed text-gray-700 space-y-4">
                    
                <div class="translatable-block">
                    <p data-translation="Aníbal the ant is the most organized ant in the entire forest. He loves work. Every day, Aníbal makes lists and plans. &quot;Organization is the most important thing!&quot; he always says. For Aníbal, every minute of the day is for working.">Aníbal la hormiga es la hormiga más organizada de todo el bosque. Le encanta el trabajo. Cada día, Aníbal hace listas y planes. "¡La organización es lo más importante!", dice siempre. Para Aníbal, cada minuto del día es para trabajar.</p>
                    <button class="translate-btn mt-2 px-3 py-1 bg-emerald-500 text-white text-sm rounded-md hover:bg-emerald-600 transition-colors focus-outline-none focus:ring-2 focus:ring-emerald-400">Traducir</button>
                    <p class="translation-text hidden mt-2 text-sky-700 italic bg-sky-50 p-3 rounded-md"></p>
                </div>
                        <img src="../../assets/stories/12/images/1.png" alt="Aníbal la hormiga, muy organizado, dirigiendo a otras hormigas en el bosque." class="w-full md:w-2/3 mx-auto aspect-video object-cover rounded-lg shadow-md my-6 md:my-8">
                        
                <div class="translatable-block">
                    <p data-translation="But one day, the weekend arrives. Aníbal wakes up and sees something very strange. The forest is silent. Nobody is working! He sees Lola the ladybug sleeping on a leaf. What a terrible sight! Aníbal thinks it's a very rare illness. &quot;Oh no! It's The Great Rest!&quot; he shouts, worried.">Pero un día, llega el fin de semana. Aníbal se despierta y ve algo muy extraño. El bosque está en silencio. ¡Nadie está trabajando! Ve a Lola la mariquita durmiendo en una hoja. ¡Qué visión tan terrible! Aníbal piensa que es una enfermedad muy rara. "¡Oh, no! ¡Es El Gran Descanso!", grita preocupado.</p>
                    <button class="translate-btn mt-2 px-3 py-1 bg-emerald-500 text-white text-sm rounded-md hover:bg-emerald-600 transition-colors focus-outline-none focus:ring-2 focus:ring-emerald-400">Traducir</button>
                    <p class="translation-text hidden mt-2 text-sky-700 italic bg-sky-50 p-3 rounded-md"></p>
                </div>
                        <img src="../../assets/stories/12/images/2.png" alt="La hormiga Aníbal mira con horror a una mariquita que duerme tranquilamente." class="w-full md:w-2/3 mx-auto aspect-video object-cover rounded-lg shadow-md my-6 md:my-8">
                        
                <div class="translatable-block">
                    <p data-translation="Aníbal decides he needs to act. &quot;I must organize a big event!&quot; he thinks. &quot;An event to save everyone from laziness!&quot; His plan is the &quot;Great Work March.&quot; He runs to Lola the ladybug to wake her up.">Aníbal decide que necesita actuar. "¡Debo organizar un gran evento!", piensa. "¡Un evento para salvar a todos de la pereza!". Su plan es la "Gran Marcha del Trabajo". Corre hacia Lola la mariquita para despertarla.</p>
                    <button class="translate-btn mt-2 px-3 py-1 bg-emerald-500 text-white text-sm rounded-md hover:bg-emerald-600 transition-colors focus-outline-none focus:ring-2 focus:ring-emerald-400">Traducir</button>
                    <p class="translation-text hidden mt-2 text-sky-700 italic bg-sky-50 p-3 rounded-md"></p>
                </div>
                        
                <div class="translatable-block">
                    <p data-translation="&quot;Lola, wake up!&quot; says Aníbal. &quot;What's wrong, Aníbal? It's the weekend, I want to rest,&quot; Lola replies in a sleepy voice. &quot;There's no time to rest! The Great Rest is here! Join my event! We are going to march and work!&quot; insists Aníbal. Lola, still half-asleep, agrees to follow him.">"¡Lola, despierta!", dice Aníbal. "¿Qué pasa, Aníbal? Es el fin de semana, quiero descansar", responde Lola con voz soñolienta. "¡No hay tiempo para descansar! ¡El Gran Descanso está aquí! ¡Únete a mi evento! ¡Vamos a marchar y trabajar!", insiste Aníbal. Lola, todavía medio dormida, acepta seguirlo.</p>
                    <button class="translate-btn mt-2 px-3 py-1 bg-emerald-500 text-white text-sm rounded-md hover:bg-emerald-600 transition-colors focus-outline-none focus:ring-2 focus:ring-emerald-400">Traducir</button>
                    <p class="translation-text hidden mt-2 text-sky-700 italic bg-sky-50 p-3 rounded-md"></p>
                </div>
                        
                <div class="translatable-block">
                    <p data-translation="Then they find Arturo the squirrel, who is yawning on a tree branch. &quot;Arturo! Quick! We need your help!&quot; says Aníbal. &quot;I'm very tired, Aníbal,&quot; says Arturo. Aníbal explains about the terrible &quot;Great Rest&quot; and his important event. Arturo sighs and comes down from the tree to join the march.">Luego encuentran a Arturo la ardilla, que está bostezando en la rama de un árbol. "¡Arturo! ¡Rápido! ¡Necesitamos tu ayuda!", dice Aníbal. "Estoy muy cansado, Aníbal", dice Arturo. Aníbal le explica sobre el terrible "Gran Descanso" y su importante evento. Arturo suspira y baja del árbol para unirse a la marcha.</p>
                    <button class="translate-btn mt-2 px-3 py-1 bg-emerald-500 text-white text-sm rounded-md hover:bg-emerald-600 transition-colors focus-outline-none focus:ring-2 focus:ring-emerald-400">Traducir</button>
                    <p class="translation-text hidden mt-2 text-sky-700 italic bg-sky-50 p-3 rounded-md"></p>
                </div>
                        <img src="../../assets/stories/12/images/3.png" alt="Aníbal la hormiga lidera a una mariquita soñolienta y a una ardilla que bosteza." class="w-full md:w-2/3 mx-auto aspect-video object-cover rounded-lg shadow-md my-6 md:my-8">
                        
                <div class="translatable-block">
                    <p data-translation="The small procession continues. Under a mushroom, they see Ernesto the beetle. He is also trying to sleep. Once again, Aníbal explains the danger and the need for his &quot;Great Work March.&quot; Ernesto complains, but Aníbal's energy is contagious. &quot;Alright, alright, I'll go!&quot; says Ernesto.">La pequeña procesión continúa. Debajo de una seta, ven a Ernesto el escarabajo. Él también intenta dormir. Una vez más, Aníbal explica el peligro y la necesidad de su "Gran Marcha del Trabajo". Ernesto se queja, pero la energía de Aníbal es contagiosa. "Está bien, está bien, ¡voy!", dice Ernesto.</p>
                    <button class="translate-btn mt-2 px-3 py-1 bg-emerald-500 text-white text-sm rounded-md hover:bg-emerald-600 transition-colors focus-outline-none focus:ring-2 focus:ring-emerald-400">Traducir</button>
                    <p class="translation-text hidden mt-2 text-sky-700 italic bg-sky-50 p-3 rounded-md"></p>
                </div>
                        <img src="../../assets/stories/12/images/4.png" alt="El desfile de Aníbal ha crecido con un escarabajo gruñón." class="w-full md:w-2/3 mx-auto aspect-video object-cover rounded-lg shadow-md my-6 md:my-8">
                        
                <div class="translatable-block">
                    <p data-translation="Finally, the group arrives at a berry bush. There they see Benito the badger, an old and wise animal. Benito is very calm. With his paw, he is trying to grab the ripest berries from the top of the bush. He smiles as he works slowly.">Finalmente, el grupo llega a un arbusto de bayas. Allí ven a Benito el tejón, un animal viejo y sabio. Benito está muy tranquilo. Con su pata, intenta agarrar las bayas más maduras de la parte superior del arbusto. Él sonríe mientras trabaja lentamente.</p>
                    <button class="translate-btn mt-2 px-3 py-1 bg-emerald-500 text-white text-sm rounded-md hover:bg-emerald-600 transition-colors focus-outline-none focus:ring-2 focus:ring-emerald-400">Traducir</button>
                    <p class="translation-text hidden mt-2 text-sky-700 italic bg-sky-50 p-3 rounded-md"></p>
                </div>
                        
                <div class="translatable-block">
                    <p data-translation="&quot;Mr. Badger!&quot; exclaims Aníbal. &quot;You are infected too! You are not working fast! Join our event to fight The Great Rest!&quot; Benito the badger looks at the small, energetic group. He laughs softly.">"¡Señor Tejón!", exclama Aníbal. "¡Usted también está infectado! ¡No trabaja rápido! ¡Únase a nuestro evento para luchar contra El Gran Descanso!". Benito el tejón mira al pequeño y energético grupo. Se ríe suavemente.</p>
                    <button class="translate-btn mt-2 px-3 py-1 bg-emerald-500 text-white text-sm rounded-md hover:bg-emerald-600 transition-colors focus-outline-none focus:ring-2 focus:ring-emerald-400">Traducir</button>
                    <p class="translation-text hidden mt-2 text-sky-700 italic bg-sky-50 p-3 rounded-md"></p>
                </div>
                        <img src="../../assets/stories/12/images/5.png" alt="El sabio tejón Benito le sonríe amablemente a la pequeña hormiga Aníbal y su grupo de seguidores cansados." class="w-full md:w-2/3 mx-auto aspect-video object-cover rounded-lg shadow-md my-6 md:my-8">
                        
                <div class="translatable-block">
                    <p data-translation="&quot;Little Aníbal,&quot; says Benito in a calm voice. &quot;There is no illness. This is called the 'weekend.' It is a time to rest. Resting gives us energy for the new week of work. Working is important, but resting is important too.&quot;">"Pequeño Aníbal", dice Benito con voz calmada. "No hay ninguna enfermedad. Esto se llama 'fin de semana'. Es un tiempo para descansar. El descanso nos da energía para la nueva semana de trabajo. Trabajar es importante, pero descansar también lo es".</p>
                    <button class="translate-btn mt-2 px-3 py-1 bg-emerald-500 text-white text-sm rounded-md hover:bg-emerald-600 transition-colors focus-outline-none focus:ring-2 focus:ring-emerald-400">Traducir</button>
                    <p class="translation-text hidden mt-2 text-sky-700 italic bg-sky-50 p-3 rounded-md"></p>
                </div>
                        
                <div class="translatable-block">
                    <p data-translation="Aníbal is silent. He thinks about Benito's words. Suddenly, he understands. He feels a little silly. &quot;I'm sorry, friends,&quot; he says to the others. &quot;The event, the 'Great Work March,' is cancelled.&quot; Aníbal yawns for the first time. He decides that a nap is an excellent idea. And all the animals rested happily for the rest of the weekend.">Aníbal se queda en silencio. Piensa en las palabras de Benito. De repente, entiende. Se siente un poco tonto. "Lo siento, amigos", dice a los demás. "El evento, la 'Gran Marcha del Trabajo', está cancelado". Aníbal bosteza por primera vez. Decide que una siesta es una excelente idea. Y todos los animales descansaron felices durante el resto del fin de semana.</p>
                    <button class="translate-btn mt-2 px-3 py-1 bg-emerald-500 text-white text-sm rounded-md hover:bg-emerald-600 transition-colors focus-outline-none focus:ring-2 focus:ring-emerald-400">Traducir</button>
                    <p class="translation-text hidden mt-2 text-sky-700 italic bg-sky-50 p-3 rounded-md"></p>
                </div>
                </div>

                <!-- Moral of the Story -->
                <footer class="mt-10 pt-6 border-t-2 border-emerald-100 text-center">
                    
                        <div class="translatable-block">
                            <p class="story-title text-xl italic text-emerald-700 font-semibold" data-translation="Moral: To work is good, but to know when to rest is wise.">Moraleja: Trabajar es bueno, pero saber cuándo descansar es de sabios.</p>
                            <button class="translate-btn mt-2 px-3 py-1 bg-emerald-500 text-white text-sm rounded-md hover:bg-emerald-600 transition-colors focus-outline-none focus:ring-2 focus:ring-emerald-400">Traducir</button>
                            <p class="translation-text hidden mt-2 text-sky-700 italic bg-sky-50 p-3 rounded-md"></p>
                        </div>
                </footer>
            </div>
        </main>
    </div>

    <!-- Sticky Audio Player -->
    <div class="fixed bottom-0 left-0 right-0 z-50 bg-white/90 backdrop-blur-sm border-t border-gray-200">
        <div class="max-w-3xl mx-auto px-4 py-3">
             <!-- Audio element (hidden from view, controlled by JS) -->
            <audio id="audio-player" src="../../assets/stories/12/audio/story.mp3" preload="metadata"></audio>

            <!-- Custom Player Controls -->
            <div class="flex items-center gap-2 md:gap-4">
                <!-- Play/Pause Button -->
                <button id="play-pause-btn" class="flex-shrink-0 text-emerald-600 hover:text-emerald-800 transition-colors p-2 rounded-full hover:bg-emerald-100 focus:outline-none">
                    <svg id="play-icon" xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="currentColor" viewBox="0 0 20 20">
                      <path d="M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8.006v3.988a1 1 0 001.555.836l3.492-1.994a1 1 0 000-1.672l-3.492-1.994z" />
                    </svg>
                    <svg id="pause-icon" xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 hidden" fill="currentColor" viewBox="0 0 20 20">
                      <path d="M10 18a8 8 0 100-16 8 8 0 000 16zM8 7a1 1 0 00-1 1v4a1 1 0 001 1h1a1 1 0 001-1V8a1 1 0 00-1-1H8zm4 0a1 1 0 00-1 1v4a1 1 0 001 1h1a1 1 0 001-1V8a1 1 0 00-1-1h-1z" />
                    </svg>
                </button>

                <!-- Progress Bar and Time -->
                <div class="flex items-center gap-2 w-full">
                    <span id="current-time" class="text-xs text-gray-600 font-mono w-10 text-center">0:00</span>
                    <input type="range" id="seek-slider" class="seek-slider w-full" value="0" step="1">
                    <span id="duration" class="text-xs text-gray-600 font-mono w-10 text-center">0:00</span>
                </div>
                
                <!-- Speed Controls -->
                <div class="flex items-center space-x-1 flex-shrink-0">
                     <button data-speed="0.75" class="speed-btn w-12 px-2 py-1 text-xs rounded-md bg-gray-100 hover:bg-emerald-100 transition-colors">0.75x</button>
                     <button data-speed="1" class="speed-btn w-12 px-2 py-1 text-xs rounded-md bg-emerald-200 text-emerald-800 font-semibold transition-colors">1x</button>
                     <button data-speed="1.5" class="speed-btn w-12 px-2 py-1 text-xs rounded-md bg-gray-100 hover:bg-emerald-100 transition-colors">1.5x</button>
                     <button data-speed="2" class="speed-btn w-12 px-2 py-1 text-xs rounded-md bg-gray-100 hover:bg-emerald-100 transition-colors">2x</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // --- Translation Logic ---
            const translateButtons = document.querySelectorAll('.translate-btn');
            translateButtons.forEach(button => {
                button.addEventListener('click', () => {
                    const block = button.closest('.translatable-block');
                    const originalTextElement = block.querySelector('[data-translation]');
                    const translationTextElement = block.querySelector('.translation-text');
                    const translation = originalTextElement.getAttribute('data-translation');

                    if (translationTextElement.classList.contains('hidden')) {
                        translationTextElement.innerHTML = translation;
                        translationTextElement.classList.remove('hidden');
                        button.textContent = 'Ocultar';
                    } else {
                        translationTextElement.classList.add('hidden');
                        button.textContent = 'Traducir';
                    }
                });
            });

            // --- Modern Audio Player Logic ---
            const audioPlayer = document.getElementById('audio-player');
            const playPauseBtn = document.getElementById('play-pause-btn');
            const playIcon = document.getElementById('play-icon');
            const pauseIcon = document.getElementById('pause-icon');
            const seekSlider = document.getElementById('seek-slider');
            const currentTimeEl = document.getElementById('current-time');
            const durationEl = document.getElementById('duration');
            const speedButtons = document.querySelectorAll('.speed-btn');

            const formatTime = (seconds) => {
                if (isNaN(seconds)) return '0:00';
                const minutes = Math.floor(seconds / 60);
                const secs = Math.floor(seconds % 60);
                return `${minutes}:${secs.toString().padStart(2, '0')}`;
            };

            // Update UI when audio metadata is loaded
            audioPlayer.addEventListener('loadedmetadata', () => {
                durationEl.textContent = formatTime(audioPlayer.duration);
                seekSlider.max = audioPlayer.duration;
            });

            // Play/Pause functionality
            playPauseBtn.addEventListener('click', () => {
                if (audioPlayer.paused) {
                    audioPlayer.play();
                } else {
                    audioPlayer.pause();
                }
            });

            audioPlayer.addEventListener('play', () => {
                playIcon.classList.add('hidden');
                pauseIcon.classList.remove('hidden');
            });

            audioPlayer.addEventListener('pause', () => {
                playIcon.classList.remove('hidden');
                pauseIcon.classList.add('hidden');
            });

            // Update slider and time as audio plays
            audioPlayer.addEventListener('timeupdate', () => {
                seekSlider.value = audioPlayer.currentTime;
                currentTimeEl.textContent = formatTime(audioPlayer.currentTime);
            });

            // Seek functionality
            seekSlider.addEventListener('input', () => {
                audioPlayer.currentTime = seekSlider.value;
            });

            // Speed control functionality
            speedButtons.forEach(button => {
                button.addEventListener('click', () => {
                    const speed = parseFloat(button.dataset.speed);
                    audioPlayer.playbackRate = speed;

                    // Update button active styles
                    speedButtons.forEach(btn => {
                        btn.classList.remove('bg-emerald-200', 'text-emerald-800', 'font-semibold');
                        btn.classList.add('bg-gray-100');
                    });

                    button.classList.add('bg-emerald-200', 'text-emerald-800', 'font-semibold');
                    button.classList.remove('bg-gray-100');
                });
            });
        });
    </script>

</body>
</html>


