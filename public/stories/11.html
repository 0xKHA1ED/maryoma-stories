<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>La Planta Patricia y la Puerta Misteriosa</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Lora:ital,wght@0,400..700;1,400..700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; }
        .story-title { font-family: 'Lora', serif; }
        .story-content { font-family: 'Lora', serif; }

        /* Custom styles for the range input (seek bar) */
        .seek-slider {
            -webkit-appearance: none;
            appearance: none;
            width: 100%;
            height: 5px;
            background: #d1fae5;
            outline: none;
            opacity: 0.8;
            transition: opacity .2s;
            border-radius: 5px;
            cursor: pointer;
        }

        .seek-slider:hover {
            opacity: 1;
        }

        .seek-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 15px;
            height: 15px;
            background: #10b981;
            border-radius: 50%;
        }

        .seek-slider::-moz-range-thumb {
            width: 15px;
            height: 15px;
            background: #10b981;
            border: none;
            border-radius: 50%;
        }
    </style>
</head>
<body class="bg-emerald-50 text-gray-800 pb-24">

    <div class="container mx-auto px-4 py-8 md:py-16">
        <main class="max-w-3xl mx-auto bg-white rounded-2xl shadow-lg overflow-hidden">
            <div class="p-8 md:p-12">

                <!-- Header with Title and Icon -->
                <header class="text-center mb-8">
                    <img src="../../assets/icon.png" alt="Story Image" class="w-24 h-24 rounded-full object-cover mx-auto mb-4 shadow-md border-4 border-white">
                    <h1 class="story-title text-3xl md:text-4xl font-bold text-emerald-800">La Planta Patricia y la Puerta Misteriosa</h1>
                </header>

                <!-- Story Content -->
                <div class="story-content text-lg leading-relaxed text-gray-700 space-y-4">
                    
                <div class="translatable-block">
                    <p data-translation="Patricia is a small, happy plant. She lives in a beautiful clay pot on a sunny window sill. She loves to feel the sun on her leaves and drink fresh water. Every day is a good day for Patricia.">Patricia es una planta pequeña y feliz. Vive en una bonita maceta de barro en el alféizar de una ventana soleada. A ella le encanta sentir el sol en sus hojas y beber agua fresca. Cada día es un buen día para Patricia.</p>
                    <button class="translate-btn mt-2 px-3 py-1 bg-emerald-500 text-white text-sm rounded-md hover:bg-emerald-600 transition-colors focus-outline-none focus:ring-2 focus:ring-emerald-400">Traducir</button>
                    <p class="translation-text hidden mt-2 text-sky-700 italic bg-sky-50 p-3 rounded-md"></p>
                </div>
                        <img src="../../assets/stories/11/images/1.png" alt="Una planta sonriente en una maceta en una ventana soleada." class="w-full md:w-2/3 mx-auto aspect-video object-cover rounded-lg shadow-md my-6 md:my-8">
                        
                <div class="translatable-block">
                    <p data-translation="But one day, Patricia discovers something new. At the bottom of her pot, there is a small, dark, round hole. &quot;What is this?&quot; she thinks. &quot;It looks like a gate! A secret gate to the world below!&quot; She touches it with a root. It feels a little sticky and wet. &quot;Oh no! It's gum! A monster has blocked the gate with sticky gum!&quot;">Pero un día, Patricia descubre algo nuevo. En el <em>fondo</em> de su maceta, hay un pequeño agujero oscuro y redondo. «¿Qué es esto?», piensa. «¡Parece una <em>puerta</em>! ¡Una puerta secreta al mundo de abajo!». Lo toca con una raíz. Se siente un poco pegajoso y húmedo. «¡Oh, no! ¡Es <em>chicle</em>! ¡Un monstruo ha bloqueado la puerta con chicle pegajoso!».</p>
                    <button class="translate-btn mt-2 px-3 py-1 bg-emerald-500 text-white text-sm rounded-md hover:bg-emerald-600 transition-colors focus-outline-none focus:ring-2 focus:ring-emerald-400">Traducir</button>
                    <p class="translation-text hidden mt-2 text-sky-700 italic bg-sky-50 p-3 rounded-md"></p>
                </div>
                        <img src="../../assets/stories/11/images/2.png" alt="La planta Patricia mira con miedo un pequeño agujero en el fondo de su maceta." class="w-full md:w-2/3 mx-auto aspect-video object-cover rounded-lg shadow-md my-6 md:my-8">
                        
                <div class="translatable-block">
                    <p data-translation="Patricia is very worried. She believes she needs a weapon to break the gum and open the gate. &quot;Help! Help!&quot; she shouts. A fly, Marta the Fly, hears her. &quot;What's wrong, Patricia?&quot; asks Marta. &quot;A monster blocked the secret gate with gum! We need a weapon!&quot; says Patricia. &quot;How terrible! I will help you!&quot; says Marta.">Patricia está muy preocupada. Ella cree que necesita un <em>arma</em> para romper el chicle y abrir la puerta. «¡Ayuda! ¡Ayuda!», grita. Una mosca, la Mosca Marta, la oye. «¿Qué pasa, Patricia?», pregunta Marta. «¡Un monstruo bloqueó la puerta secreta con chicle! ¡Necesitamos un arma!», dice Patricia. «¡Qué terrible! ¡Yo te ayudo!», dice Marta.</p>
                    <button class="translate-btn mt-2 px-3 py-1 bg-emerald-500 text-white text-sm rounded-md hover:bg-emerald-600 transition-colors focus-outline-none focus:ring-2 focus:ring-emerald-400">Traducir</button>
                    <p class="translation-text hidden mt-2 text-sky-700 italic bg-sky-50 p-3 rounded-md"></p>
                </div>
                        
                <div class="translatable-block">
                    <p data-translation="Patricia and Marta look for help. They see a snail, Carlos the Snail. &quot;Carlos! We need your help!&quot; says Marta. Patricia explains the problem: &quot;There's a gate at the bottom of my pot. It's blocked with gum. We need a weapon to open it!&quot; Carlos is a brave snail. &quot;A blocked gate? That is serious. I will join your quest!&quot; he says slowly.">Patricia y Marta buscan ayuda. Ven a un caracol, el Caracol Carlos. «¡Carlos! ¡Necesitamos tu ayuda!», dice Marta. Patricia explica el problema: «Hay una puerta en el fondo de mi maceta. Está bloqueada con chicle. ¡Necesitamos un arma para abrirla!». Carlos es un caracol valiente. «¿Una puerta bloqueada? Eso es serio. ¡Me uniré a vuestra misión!», dice lentamente.</p>
                    <button class="translate-btn mt-2 px-3 py-1 bg-emerald-500 text-white text-sm rounded-md hover:bg-emerald-600 transition-colors focus-outline-none focus:ring-2 focus:ring-emerald-400">Traducir</button>
                    <p class="translation-text hidden mt-2 text-sky-700 italic bg-sky-50 p-3 rounded-md"></p>
                </div>
                        <img src="../../assets/stories/11/images/3.png" alt="La planta, una mosca y un caracol, juntos en una misión." class="w-full md:w-2/3 mx-auto aspect-video object-cover rounded-lg shadow-md my-6 md:my-8">
                        
                <div class="translatable-block">
                    <p data-translation="The three friends continue. Soon, they find a spider, Ana the Spider, weaving a web. &quot;Ana! There is an emergency!&quot; they all shout. Ana stops her work. &quot;What is happening?&quot; she asks. &quot;A monster put gum on a secret gate!&quot; explains Carlos. &quot;We need a weapon, a tool, something strong to break it!&quot; adds Patricia. &quot;A monster! I will help you protect the gate!&quot; says Ana, and she joins the group.">Los tres amigos continúan. Pronto, encuentran a una araña, la Araña Ana, tejiendo una telaraña. «¡Ana! ¡Hay una emergencia!», gritan todos. Ana detiene su trabajo. «¿Qué está pasando?», pregunta. «¡Un monstruo puso chicle en una puerta secreta!», explica Carlos. «¡Necesitamos un arma, una herramienta, algo fuerte para romperlo!», añade Patricia. «¡Un monstruo! ¡Yo os ayudaré a proteger la puerta!», dice Ana, y se une al grupo.</p>
                    <button class="translate-btn mt-2 px-3 py-1 bg-emerald-500 text-white text-sm rounded-md hover:bg-emerald-600 transition-colors focus-outline-none focus:ring-2 focus:ring-emerald-400">Traducir</button>
                    <p class="translation-text hidden mt-2 text-sky-700 italic bg-sky-50 p-3 rounded-md"></p>
                </div>
                        <img src="../../assets/stories/11/images/4.png" alt="El grupo completo de amigos —planta, mosca, caracol y araña— miran preocupados la maceta." class="w-full md:w-2/3 mx-auto aspect-video object-cover rounded-lg shadow-md my-6 md:my-8">
                        
                <div class="translatable-block">
                    <p data-translation="The group does not know what to do. Suddenly, a small head appears from the soil inside the pot. It is Lorenzo the Earthworm. He is old and very wise. &quot;Why is everyone so worried?&quot; he asks calmly. They all explain the story of the monster, the gate, the gum, and the need for a weapon.">El grupo no sabe qué hacer. De repente, una pequeña cabeza aparece de la tierra dentro de la maceta. Es el Lombriz Lorenzo. Es viejo y muy sabio. «¿Por qué están todos tan preocupados?», pregunta con calma. Todos le explican la historia del monstruo, la puerta, el chicle y la necesidad de un arma.</p>
                    <button class="translate-btn mt-2 px-3 py-1 bg-emerald-500 text-white text-sm rounded-md hover:bg-emerald-600 transition-colors focus-outline-none focus:ring-2 focus:ring-emerald-400">Traducir</button>
                    <p class="translation-text hidden mt-2 text-sky-700 italic bg-sky-50 p-3 rounded-md"></p>
                </div>
                        
                <div class="translatable-block">
                    <p data-translation="Lorenzo laughs a soft, gentle laugh. &quot;My friends,&quot; he says, &quot;That is not a gate. It's just a hole for the water to escape. And that is not gum. It's just wet soil. There is no monster.&quot; He continues, &quot;You don't need a weapon. Watch.&quot; Lorenzo calmly burrows down through the soil and passes easily through the hole, waving from the other side. The friends look at each other and laugh, relieved.">Lorenzo ríe una risa suave y gentil. «Mis amigos», dice, «eso no es una puerta. Es solo un agujero para que salga el agua. Y eso no es chicle. Es solo tierra mojada. No hay ningún monstruo». Continúa: «No necesitáis un arma. Mirad». Lorenzo se entierra tranquilamente en la tierra y pasa fácilmente por el agujero, saludando desde el otro lado. Los amigos se miran y ríen, aliviados.</p>
                    <button class="translate-btn mt-2 px-3 py-1 bg-emerald-500 text-white text-sm rounded-md hover:bg-emerald-600 transition-colors focus-outline-none focus:ring-2 focus:ring-emerald-400">Traducir</button>
                    <p class="translation-text hidden mt-2 text-sky-700 italic bg-sky-50 p-3 rounded-md"></p>
                </div>
                        <img src="../../assets/stories/11/images/5.png" alt="Un gusano sabio sonríe mientras sale por el agujero de la maceta, y los otros animales lo miran con alivio." class="w-full md:w-2/3 mx-auto aspect-video object-cover rounded-lg shadow-md my-6 md:my-8">
                </div>

                <!-- Moral of the Story -->
                <footer class="mt-10 pt-6 border-t-2 border-emerald-100 text-center">
                    
                        <div class="translatable-block">
                            <p class="story-title text-xl italic text-emerald-700 font-semibold" data-translation="Moral: Often, big problems are just small misunderstandings.">Moraleja: A menudo, los grandes problemas son solo pequeños malentendidos.</p>
                            <button class="translate-btn mt-2 px-3 py-1 bg-emerald-500 text-white text-sm rounded-md hover:bg-emerald-600 transition-colors focus-outline-none focus:ring-2 focus:ring-emerald-400">Traducir</button>
                            <p class="translation-text hidden mt-2 text-sky-700 italic bg-sky-50 p-3 rounded-md"></p>
                        </div>
                </footer>
            </div>
        </main>
    </div>

    <!-- Sticky Audio Player -->
    <div class="fixed bottom-0 left-0 right-0 z-50 bg-white/90 backdrop-blur-sm border-t border-gray-200">
        <div class="max-w-3xl mx-auto px-4 py-3">
             <!-- Audio element (hidden from view, controlled by JS) -->
            <audio id="audio-player" src="../../assets/stories/11/audio/story.mp3" preload="metadata"></audio>

            <!-- Custom Player Controls -->
            <div class="flex items-center gap-2 md:gap-4">
                <!-- Play/Pause Button -->
                <button id="play-pause-btn" class="flex-shrink-0 text-emerald-600 hover:text-emerald-800 transition-colors p-2 rounded-full hover:bg-emerald-100 focus:outline-none">
                    <svg id="play-icon" xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="currentColor" viewBox="0 0 20 20">
                      <path d="M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8.006v3.988a1 1 0 001.555.836l3.492-1.994a1 1 0 000-1.672l-3.492-1.994z" />
                    </svg>
                    <svg id="pause-icon" xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 hidden" fill="currentColor" viewBox="0 0 20 20">
                      <path d="M10 18a8 8 0 100-16 8 8 0 000 16zM8 7a1 1 0 00-1 1v4a1 1 0 001 1h1a1 1 0 001-1V8a1 1 0 00-1-1H8zm4 0a1 1 0 00-1 1v4a1 1 0 001 1h1a1 1 0 001-1V8a1 1 0 00-1-1h-1z" />
                    </svg>
                </button>

                <!-- Progress Bar and Time -->
                <div class="flex items-center gap-2 w-full">
                    <span id="current-time" class="text-xs text-gray-600 font-mono w-10 text-center">0:00</span>
                    <input type="range" id="seek-slider" class="seek-slider w-full" value="0" step="1">
                    <span id="duration" class="text-xs text-gray-600 font-mono w-10 text-center">0:00</span>
                </div>
                
                <!-- Speed Controls -->
                <div class="flex items-center space-x-1 flex-shrink-0">
                     <button data-speed="0.75" class="speed-btn w-12 px-2 py-1 text-xs rounded-md bg-gray-100 hover:bg-emerald-100 transition-colors">0.75x</button>
                     <button data-speed="1" class="speed-btn w-12 px-2 py-1 text-xs rounded-md bg-emerald-200 text-emerald-800 font-semibold transition-colors">1x</button>
                     <button data-speed="1.5" class="speed-btn w-12 px-2 py-1 text-xs rounded-md bg-gray-100 hover:bg-emerald-100 transition-colors">1.5x</button>
                     <button data-speed="2" class="speed-btn w-12 px-2 py-1 text-xs rounded-md bg-gray-100 hover:bg-emerald-100 transition-colors">2x</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // --- Translation Logic ---
            const translateButtons = document.querySelectorAll('.translate-btn');
            translateButtons.forEach(button => {
                button.addEventListener('click', () => {
                    const block = button.closest('.translatable-block');
                    const originalTextElement = block.querySelector('[data-translation]');
                    const translationTextElement = block.querySelector('.translation-text');
                    const translation = originalTextElement.getAttribute('data-translation');

                    if (translationTextElement.classList.contains('hidden')) {
                        translationTextElement.innerHTML = translation;
                        translationTextElement.classList.remove('hidden');
                        button.textContent = 'Ocultar';
                    } else {
                        translationTextElement.classList.add('hidden');
                        button.textContent = 'Traducir';
                    }
                });
            });

            // --- Modern Audio Player Logic ---
            const audioPlayer = document.getElementById('audio-player');
            const playPauseBtn = document.getElementById('play-pause-btn');
            const playIcon = document.getElementById('play-icon');
            const pauseIcon = document.getElementById('pause-icon');
            const seekSlider = document.getElementById('seek-slider');
            const currentTimeEl = document.getElementById('current-time');
            const durationEl = document.getElementById('duration');
            const speedButtons = document.querySelectorAll('.speed-btn');

            const formatTime = (seconds) => {
                if (isNaN(seconds)) return '0:00';
                const minutes = Math.floor(seconds / 60);
                const secs = Math.floor(seconds % 60);
                return `${minutes}:${secs.toString().padStart(2, '0')}`;
            };

            // Update UI when audio metadata is loaded
            audioPlayer.addEventListener('loadedmetadata', () => {
                durationEl.textContent = formatTime(audioPlayer.duration);
                seekSlider.max = audioPlayer.duration;
            });

            // Play/Pause functionality
            playPauseBtn.addEventListener('click', () => {
                if (audioPlayer.paused) {
                    audioPlayer.play();
                } else {
                    audioPlayer.pause();
                }
            });

            audioPlayer.addEventListener('play', () => {
                playIcon.classList.add('hidden');
                pauseIcon.classList.remove('hidden');
            });

            audioPlayer.addEventListener('pause', () => {
                playIcon.classList.remove('hidden');
                pauseIcon.classList.add('hidden');
            });

            // Update slider and time as audio plays
            audioPlayer.addEventListener('timeupdate', () => {
                seekSlider.value = audioPlayer.currentTime;
                currentTimeEl.textContent = formatTime(audioPlayer.currentTime);
            });

            // Seek functionality
            seekSlider.addEventListener('input', () => {
                audioPlayer.currentTime = seekSlider.value;
            });

            // Speed control functionality
            speedButtons.forEach(button => {
                button.addEventListener('click', () => {
                    const speed = parseFloat(button.dataset.speed);
                    audioPlayer.playbackRate = speed;

                    // Update button active styles
                    speedButtons.forEach(btn => {
                        btn.classList.remove('bg-emerald-200', 'text-emerald-800', 'font-semibold');
                        btn.classList.add('bg-gray-100');
                    });

                    button.classList.add('bg-emerald-200', 'text-emerald-800', 'font-semibold');
                    button.classList.remove('bg-gray-100');
                });
            });
        });
    </script>

</body>
</html>


